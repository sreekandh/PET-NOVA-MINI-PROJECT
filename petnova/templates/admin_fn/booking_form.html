<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Caretaker Slot</title>
</head>
<body>

    <a href="{% url 'user_view_caretaker' %}">Back to Caretaker List</a>  <!-- Link back to the caretaker list -->

    <h1>Book Caretaker Slot</h1>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
    
        {{ form.service }}  <!-- Render service selection -->
        {{ form.duration }} <!-- Render duration selection -->
    
        <!-- New fields for pet details -->
        <h2>Pet Details</h2>
        <label for="pet_name">Pet Name:</label>
        {{ form.pet_name }}<br>
        {{ form.pet_name.errors }}  <!-- Display errors for pet name -->
    
        <label for="pet_breed">Breed:</label>
        {{ form.pet_breed }}<br>
        {{ form.pet_breed.errors }}  <!-- Display errors for pet breed -->
    
        <label for="pet_species">Species:</label>
        {{ form.pet_species }}<br>
        {{ form.pet_species.errors }}  <!-- Display errors for pet species -->
    
        <label for="pet_age">Age:</label>
        {{ form.pet_age }}<br>
        {{ form.pet_age.errors }}  <!-- Display errors for pet age -->
    
        <label for="pet_image">Image:</label>
        {{ form.pet_image }}<br>
        {{ form.pet_image.errors }}  <!-- Display errors for pet image -->
    
        <label for="service_start_date">Service Start Date:</label>
        {{ form.service_start_date }}<br>
        {{ form.service_start_date.errors }}  <!-- Display errors for service start date -->
    
        <label for="additional_notes">Additional Information:</label>
        {{ form.additional_notes }}<br>
        {{ form.additional_notes.errors }}  <!-- Display errors for additional notes -->
    
        <!-- Display the total price -->
        <p>Total Price: <span id="total-price">0</span> Rs</p>
    
        <button type="submit">Book Slot</button>
    </form>
    

    <script>
        // Optional: JavaScript to update the total price dynamically
        document.addEventListener('DOMContentLoaded', function() {
            const serviceInputs = document.querySelectorAll('input[name="service"]');
            const durationInput = document.querySelector('input[name="duration"]');
            const totalPriceElement = document.getElementById('total-price');

            const pricesPerDay = {
                'Pet Sitting': 100,
                'Pet Grooming': 150,
                'Dog Walker': 75,
                'Pet Feeder': 50,
            };

            function calculateTotalPrice() {
                let totalPrice = 0;
                const selectedServices = Array.from(serviceInputs).filter(input => input.checked).map(input => input.value);
                const duration = parseInt(durationInput.value) || 0;

                selectedServices.forEach(service => {
                    totalPrice += pricesPerDay[service] * duration;
                });

                totalPriceElement.textContent = totalPrice.toFixed(2);
            }

            // Attach event listeners
            serviceInputs.forEach(input => input.addEventListener('change', calculateTotalPrice));
            durationInput.addEventListener('input', calculateTotalPrice);
        });
    </script>
</body>
</html>
